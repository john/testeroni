-if user_signed_in?
  %h2= link_to 'Create a test right now', new_test_url
- else

  %p{:style => "padding:0; margin:0; font-size:1.2em; width:80%;float:left;"}
    %strong< Testeroni is a free community for making and taking surveys and tests.
    
  %div{:style => 'width:600px; margin-top:20px; padding-top:60px;'}
    =link_to_function('Create Account', "signupThenGoTo('')", :class => 'green button', :style => 'font-size:1.8em; font-style:italic; font-weight:bold;padding:5px 10px;')
    Already have an account?
    =link_to 'sign up'
  .clearfix
  
    -# put this in a content_for so that it's at the bottom of the template and doesn't slow page rendering
    :javascript
      $(document).ready(function() {
        $('#signup_link').click(function() {
          signupThenGoTo('#{new_test_path}');
        });
      });
      
      
%p{:style => 'padding:35px 0;'} Or start right now and take any of these tests. You can sign up when you're done if you want to save your results.
-if @tests.size > 0
  %ul.bulletless.home
    -@tests.each do |t|
      %li
        %h3

          =link_to(t.name, test_url(t.id, t.to_param))
          %span
            =link_to('take me!', test_url(t.id, t.to_param), :class => 'green button sm')

        %div
          ="Has #{pluralize(t.questions.size, 'question')} and has been taken #{pluralize(t.takes.size, 'time')}"
          -unless t.takes.blank?
            with an average grade of #{t.grade}
          
        -unless t.tags.empty?
          %div
            tags:
            !=t.tag_list.collect{|tag| "<span class='tag'>#{link_to(tag, tag_path(url_escape(tag)), :rel => 'tag')}</span>"}.join('&nbsp; ')
          
          -#
            =link_to('View questions', test_questions_path(t.id, t.to_param))
            |
            =link_to('View results', test_results_path(t.id, t.to_param))
            -if user_signed_in?
              -if t.user == current_user || t.contributors == Tst::ANYONE
                |
                =link_to('Edit this test', edit_test_url(t.id))
            
- else
  %div{:style => 'font-style:italic;'} No tests created yet.