-if user_signed_in?
  %h2= link_to 'Create a test right now', new_test_url
- else

  %p{:style => "padding:0; margin:0; font-size:1.2em; width:80%;float:left;"}
    %strong< Testeroni is a free site for making and taking tests.
    Anyone can make a test and anyone can take any test on the site. Tests can have from 1 to 100 questions, which can be true/false, multiple choice, or short answer. Test are fun to take, easy to make, can contain video and images, and you can embed them in blogs and facebook pages.
  %div{:style => 'width:20%;float:right; margin-top:20px;'}
    =link_to_function('JOIN NOW', "signupThenGoTo('')", :class => 'green button', :style => 'font-size:2em; font-style:italic; font-weight:bold;padding:15px 10px;')
  .clearfix
  
  %h2{:style => 'padding:20px 0 0 0;'}
    %a#signup_link Create a test right now

    -# put this in a content_for so that it's at the bottom of the template and doesn't slow page rendering
    :javascript
      $(document).ready(function() {
        $('#signup_link').click(function() {
          signupThenGoTo('#{new_test_path}');
        });
      });
      
      
%h3{:style => 'padding:20px 0 5px 60px;'} Recent tests
-if @tests.size > 0
  %ul.bulletless{:style => 'margin-left:60px;'}
    -@tests.each do |t|
      %li{:style => 'padding-bottom:25px;'}
        %h3
          %span{:style => 'margin-left:-80px;'}
            %a.green.button{:style => 'padding:2px 4px; font-size:.8em;'} take me!
          =link_to(t.name, test_url(t.id, t.to_param))
        %div
          ="Has #{pluralize(t.questions.size, 'question')} and has been taken #{pluralize(t.takes.size, 'time')}."
        
        -unless t.tags.empty?
          %div
            tags:
            !=t.tag_list.collect{|tag| "<span class='tag'>#{link_to(tag, tag_path(url_escape(tag)), :rel => 'tag')}</span>"}.join('&nbsp; ')
          -unless t.grade.blank?
            with an average grade of #{t.grade}.
          
          -#
            =link_to('View questions', test_questions_path(t.id, t.to_param))
            |
            =link_to('View results', test_results_path(t.id, t.to_param))
            -if user_signed_in?
              -if t.user == current_user || t.contributors == Tst::ANYONE
                |
                =link_to('Edit this test', edit_test_url(t.id))
            
- else
  %div{:style => 'font-style:italic;'} No tests created yet.